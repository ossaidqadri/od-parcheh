<style>
  .hero-collage-wrapper {
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    padding: 2rem 1.5rem;
  }

  @media (min-width: 640px) {
    .hero-collage-wrapper {
      padding: 2rem 5rem;
    }
  }

  .hero-collage-card {
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    background-color: white;
    display: flex;
    flex-direction: column;
  }

  .hero-collage-link {
    display: flex;
    flex-direction: column;
    margin: 0 auto;
    text-decoration: none;
    flex: 1;
    width: 100%;
  }

  .hero-collage-link.single-image {
    max-width: 100%;
  }

  .hero-collage-link.multi-image {
    max-width: 40rem;
  }

  .hero-collage-heading {
    margin-bottom: 2rem;
    text-align: center;
    font-weight: bold;
  }

  .hero-collage-heading.h0 {
    font-size: 3rem;
  }

  .hero-collage-heading.h1 {
    font-size: 2.25rem;
  }

  .hero-collage-heading.h2 {
    font-size: 1.875rem;
  }

  .hero-collage-heading.hxl {
    font-size: 3.75rem;
  }

  @media (min-width: 768px) {
    .hero-collage-heading.h0 {
      font-size: 4.5rem;
    }

    .hero-collage-heading.h1 {
      font-size: 3.75rem;
    }

    .hero-collage-heading.h2 {
      font-size: 3rem;
    }

    .hero-collage-heading.hxl {
      font-size: 6rem;
    }
  }

  .hero-single-container {
    width: 100%;
    flex: 1;
    display: flex;
  }

  .hero-single-image-wrapper {
    width: 100%;
    overflow: hidden;
    flex: 1;
    display: flex;
  }

  .hero-single-image-wrapper img {
    width: 100%;
    height: 100%;
    min-height: 280px;
    object-fit: cover;
    transition: transform 0.7s ease-out;
  }

  .hero-single-image-wrapper img:hover {
    transform: scale(1.05);
  }

  .hero-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.5rem;
  }

  @media (min-width: 640px) {
    .hero-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 768px) {
    .hero-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .hero-grid-item {
    overflow: hidden;
  }

  .hero-grid-item.large {
    grid-column: span 1;
    grid-row: span 1;
  }

  @media (min-width: 768px) {
    .hero-grid-item.large {
      grid-column: span 2;
      grid-row: span 2;
    }
  }

  .hero-grid-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.7s ease-out;
  }

  .hero-grid-item img:hover {
    transform: scale(1.05);
  }

  .hero-grid-item.small img {
    max-height: 250px;
  }

  .hero-placeholder {
    width: 100%;
    height: 100%;
    background-color: #f3f4f6;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 200px;
  }

  .hero-placeholder.large {
    min-height: 400px;
  }

  .hero-placeholder.single {
    height: 100%;
    min-height: 280px;
    flex: 1;
  }

  .hero-placeholder span {
    color: #9ca3af;
    font-size: 0.875rem;
  }
</style>

<div class="hero-collage-wrapper">
  <div class="hero-collage-card" style="padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px;">
    <a
      href="{{ section.settings.custom_link }}"
      class="hero-collage-link {% if section.blocks.size == 1 %}single-image{% else %}multi-image{% endif %}"
      {% if section.settings.custom_link == blank %}
        aria-disabled="true"
      {% endif %}
    >
      {% if section.settings.heading != blank %}
        <h2 class="hero-collage-heading {{ section.settings.heading_size }}">
          {{ section.settings.heading }}
        </h2>
      {% endif %}

      {% if section.blocks.size == 1 %}
        <div class="hero-single-container">
          {% for block in section.blocks %}
            <div class="hero-single-image-wrapper" {{ block.shopify_attributes }}>
              {% if block.settings.image != blank %}
                <img
                  src="{{ block.settings.image | image_url: width: 1200 }}"
                  srcset="
                    {{ block.settings.image | image_url: width: 375 }} 375w,
                    {{ block.settings.image | image_url: width: 750 }} 750w,
                    {{ block.settings.image | image_url: width: 1200 }} 1200w,
                    {{ block.settings.image | image_url: width: 1600 }} 1600w
                  "
                  sizes="(min-width: 768px) 50vw, 100vw"
                  alt="{{ block.settings.image.alt | escape }}"
                  loading="eager"
                >
              {% else %}
                <div class="hero-placeholder single">
                  <span>Image placeholder</span>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="hero-grid">
          {% for block in section.blocks %}
            {% if forloop.first and section.settings.desktop_layout == 'left' %}
              <div class="hero-grid-item large" {{ block.shopify_attributes }}>
                {% if block.settings.image != blank %}
                  <img
                    src="{{ block.settings.image | image_url: width: 1200 }}"
                    srcset="
                      {{ block.settings.image | image_url: width: 375 }} 375w,
                      {{ block.settings.image | image_url: width: 750 }} 750w,
                      {{ block.settings.image | image_url: width: 1200 }} 1200w,
                      {{ block.settings.image | image_url: width: 1600 }} 1600w
                    "
                    sizes="(min-width: 768px) 66vw, 100vw"
                    alt="{{ block.settings.image.alt | escape }}"
                    loading="eager"
                  >
                {% else %}
                  <div class="hero-placeholder large">
                    <span>Image placeholder</span>
                  </div>
                {% endif %}
              </div>
            {% else %}
              <div class="hero-grid-item small" {{ block.shopify_attributes }}>
                {% if block.settings.image != blank %}
                  <img
                    src="{{ block.settings.image | image_url: width: 600 }}"
                    srcset="
                      {{ block.settings.image | image_url: width: 300 }} 300w,
                      {{ block.settings.image | image_url: width: 600 }} 600w,
                      {{ block.settings.image | image_url: width: 900 }} 900w
                    "
                    sizes="(min-width: 768px) 33vw, 50vw"
                    alt="{{ block.settings.image.alt | escape }}"
                    loading="lazy"
                  >
                {% else %}
                  <div class="hero-placeholder">
                    <span>Image placeholder</span>
                  </div>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </a>
  </div>
</div>

{% schema %}
{
  "name": "Hero Collage",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        { "value": "h2", "label": "H2" },
        { "value": "h1", "label": "H1" },
        { "value": "h0", "label": "H0" },
        { "value": "hxl", "label": "HXL" }
      ],
      "default": "h2",
      "label": "Heading Size"
    },
    {
      "type": "url",
      "id": "custom_link",
      "label": "Link URL",
      "info": "Entire section will be clickable"
    },
    {
      "type": "select",
      "id": "desktop_layout",
      "options": [
        { "value": "left", "label": "Large image on left" },
        { "value": "right", "label": "Large image on right" }
      ],
      "default": "left",
      "label": "Desktop Layout"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 36,
      "unit": "px",
      "label": "Padding Top"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "default": 36,
      "unit": "px",
      "label": "Padding Bottom"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "max_blocks": 3,
  "presets": [
    {
      "name": "Hero Collage",
      "blocks": [
        {
          "type": "image"
        }
      ]
    }
  ]
}
{% endschema %}
